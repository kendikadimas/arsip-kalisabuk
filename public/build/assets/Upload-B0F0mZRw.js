import{c as H,a as _,j as t,b as I,H as R,L as K}from"./app-CRe42x6t.js";import{X as $,A as G}from"./app-layout-CzO31bEb.js";import{B}from"./button-CjYAZBTf.js";import{I as M}from"./input-DGqsE7Vu.js";import{L as A}from"./label-BLX2CT5D.js";import{S as O,a as V,b as J,c as X,U as z,d as Y}from"./select-BbECAkGC.js";import{F as q}from"./file-text-Pv5-k-HJ.js";import{F as Q}from"./file-Bw7CNPiA.js";import{C as E}from"./circle-alert-B9Xn6Kbh.js";import{C as W}from"./chevron-left-HtgDhHhP.js";import{C as Z}from"./check-CMFNYAwF.js";/* empty css            */import"./index-D9NeJPGi.js";import"./index-BCebFosc.js";import"./index-C98-_TgA.js";import"./index-DqgLV65w.js";const ee=[{title:"Beranda",href:"/dashboard"},{title:"Upload Dokumen",href:"/upload"}];function ge(p){const e=H.c(35),{categories:b}=p;let f;e[0]!==b?(f=b===void 0?[]:b,e[0]=b,e[1]=f):f=e[1];const F=f,[r,D]=_.useState(null),[a,o]=_.useState("select"),[U,L]=_.useState(0);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g={title:"",year:new Date().getFullYear().toString(),category_id:""},e[2]=g):g=e[2];const[s,j]=_.useState(g);let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N=l=>{if(l.target.files&&l.target.files[0]){const i=l.target.files[0];if(i.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}D(i),j(C=>({...C,title:i.name.replace(/\.[^/.]+$/,"")})),o("details")}},e[3]=N):N=e[3];const T=N;let v;e[4]!==r||e[5]!==s?(v=async()=>{if(!r)return;o("uploading");const l=new FormData;l.append("file",r),l.append("title",s.title),l.append("year",s.year),l.append("category_id",s.category_id);try{await I.post("/api/archives",l,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{const C=Math.round(i.loaded*100/(i.total??1));L(C)}}),o("success")}catch(i){console.error(i),alert("Upload gagal. Pastikan ukuran file tidak melebihi batas dan coba lagi."),o("details")}},e[4]=r,e[5]=s,e[6]=v):v=e[6];const P=v;let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(R,{title:"Upload Dokumen"}),e[7]=y):y=e[7];let w;e[8]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(K,{href:"/dashboard",className:"flex h-12 w-12 items-center justify-center rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:t.jsx(W,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-slate-900",children:"Upload Dokumen"}),t.jsx("p",{className:"text-sm md:text-base text-slate-500",children:"Pilih berkas PDF untuk diarsipkan"})]})]}),e[8]=w):w=e[8];let d;e[9]!==a?(d=a==="select"&&t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-[3rem] bg-slate-50 p-12 md:p-24 text-center group hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer relative overflow-hidden",children:[t.jsx("input",{type:"file",accept:".pdf",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),t.jsx("div",{className:"h-24 w-24 md:h-32 md:w-32 rounded-full bg-white shadow-sm flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:t.jsx(z,{className:"h-10 w-10 md:h-16 md:w-16 text-slate-400 group-hover:text-blue-600"})}),t.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-2",children:"Klik atau Seret Berkas"}),t.jsxs("p",{className:"text-sm md:text-base text-slate-500 max-w-[300px] mx-auto",children:["Pastikan berkas berformat ",t.jsx("strong",{children:"PDF"})," dengan ukuran maksimal 10MB."]})]}),e[9]=a,e[10]=d):d=e[10];let n;e[11]!==F||e[12]!==r||e[13]!==s||e[14]!==P||e[15]!==a?(n=a==="details"&&r&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 items-start",children:[t.jsxs("div",{className:"md:col-span-5 space-y-6",children:[t.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-100 rounded-[2.5rem] relative overflow-hidden group",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"h-16 w-16 rounded-2xl bg-blue-600 flex items-center justify-center text-white mb-6",children:t.jsx(q,{className:"h-8 w-8"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("h4",{className:"text-lg font-bold text-blue-900 truncate pr-8",title:r.name,children:r.name}),t.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[(r.size/1024/1024).toFixed(2)," MB â€¢ PDF Document"]})]})]}),t.jsx("button",{onClick:()=>{D(null),o("select")},className:"absolute top-6 right-6 p-2 text-blue-400 hover:text-blue-600 hover:bg-blue-100 rounded-full transition-colors z-20",children:t.jsx($,{className:"h-6 w-6"})}),t.jsx(Q,{className:"absolute -right-8 -bottom-8 h-32 w-32 text-blue-200/30 -rotate-12 transition-transform group-hover:rotate-0 duration-700"})]}),t.jsxs("div",{className:"hidden md:flex bg-amber-50 border border-amber-100 p-6 rounded-[2rem] gap-4",children:[t.jsx(E,{className:"h-6 w-6 text-amber-600 shrink-0"}),t.jsx("p",{className:"text-sm text-amber-900 leading-relaxed font-medium",children:"Pastikan dokumen sudah dalam kualitas yang baik agar mudah dibaca oleh sistem di masa mendatang."})]})]}),t.jsxs("div",{className:"md:col-span-7 bg-white p-8 md:p-10 rounded-[3rem] border border-slate-100 shadow-2xl shadow-slate-200/50 space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(A,{htmlFor:"title",className:"text-slate-600 ml-2 font-bold text-sm",children:"NAMA DOKUMEN"}),t.jsx(M,{id:"title",placeholder:"Contoh: Akta Kelahiran Budi",className:"rounded-2xl border-slate-200 h-14 text-lg px-6 focus:ring-blue-500 bg-slate-50 border-none",value:s.title,onChange:l=>j({...s,title:l.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(A,{htmlFor:"year",className:"text-slate-600 ml-2 font-bold text-sm",children:"TAHUN BERKAS"}),t.jsx(M,{id:"year",type:"number",className:"rounded-2xl border-slate-200 h-14 text-lg px-6 focus:ring-blue-500 bg-slate-50 border-none",value:s.year,onChange:l=>j({...s,year:l.target.value})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(A,{className:"text-slate-600 ml-2 font-bold text-sm",children:"KATEGORI"}),t.jsxs(O,{value:s.category_id,onValueChange:l=>j({...s,category_id:l}),children:[t.jsx(V,{className:"rounded-2xl border-slate-200 h-14 text-lg px-6 focus:ring-blue-500 bg-slate-50 border-none",children:t.jsx(J,{placeholder:"Pilih..."})}),t.jsx(X,{className:"rounded-2xl",children:F.map(te)})]})]})]}),t.jsxs(B,{className:"w-full h-16 bg-blue-600 hover:bg-blue-700 rounded-[1.5rem] shadow-xl shadow-blue-600/20 font-bold text-xl mt-4 transition-transform active:scale-95",onClick:P,disabled:!s.category_id||!s.title,children:[t.jsx(z,{className:"mr-3 h-6 w-6"})," Unggah Sekarang"]})]})]}),e[11]=F,e[12]=r,e[13]=s,e[14]=P,e[15]=a,e[16]=n):n=e[16];let c;e[17]!==U||e[18]!==a?(c=a==="uploading"&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsxs("div",{className:"relative h-32 w-32 mb-8",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-slate-100"}),t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[U,"%"]})})]}),t.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Mengirim Berkas"}),t.jsx("p",{className:"text-slate-500 max-w-[240px] mt-2",children:"Jangan tutup halaman ini sampai proses unggah selesai."})]}),e[17]=U,e[18]=a,e[19]=c):c=e[19];let m;e[20]!==a?(m=a==="success"&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-in fade-in zoom-in duration-500",children:[t.jsx("div",{className:"h-24 w-24 rounded-full bg-emerald-500 flex items-center justify-center mb-6 shadow-xl shadow-emerald-500/20 text-white",children:t.jsx(Z,{className:"h-12 w-12"})}),t.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Upload Berhasil!"}),t.jsx("p",{className:"text-slate-500 max-w-[240px] mt-2 mb-8",children:"Berkas telah disimpan di Google Drive Desa."}),t.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-[200px] mx-auto",children:[t.jsx(B,{className:"bg-blue-600 hover:bg-blue-700 rounded-xl font-bold h-12 shadow-lg",onClick:()=>{D(null),o("select"),L(0)},children:"Upload Lagi"}),t.jsx(B,{variant:"ghost",className:"text-slate-500 hover:text-slate-900",asChild:!0,children:t.jsx(K,{href:"/dashboard",children:"Ke Dashboard"})})]})]}),e[20]=a,e[21]=m):m=e[21];let x;e[22]!==c||e[23]!==m||e[24]!==d||e[25]!==n?(x=t.jsxs("div",{className:"flex-1 flex flex-col gap-6 mt-4",children:[d,n,c,m]}),e[22]=c,e[23]=m,e[24]=d,e[25]=n,e[26]=x):x=e[26];let h;e[27]!==a?(h=a==="select"&&t.jsxs("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-2xl flex gap-3",children:[t.jsx(E,{className:"h-5 w-5 text-amber-600 shrink-0"}),t.jsx("p",{className:"text-xs text-amber-900 leading-relaxed",children:"Pastikan dokumen sudah dalam kualitas yang baik agar mudah dibaca oleh sistem di masa mendatang."})]}),e[27]=a,e[28]=h):h=e[28];let u;e[29]!==x||e[30]!==h?(u=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-8 max-w-5xl mx-auto w-full font-sans",children:[w,x,h]}),e[29]=x,e[30]=h,e[31]=u):u=e[31];let k;e[32]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("div",{className:"h-20 md:hidden"}),e[32]=k):k=e[32];let S;return e[33]!==u?(S=t.jsxs(G,{breadcrumbs:ee,children:[y,u,k]}),e[33]=u,e[34]=S):S=e[34],S}function te(p){return t.jsx(Y,{value:p.id.toString(),className:"rounded-xl",children:p.name},p.id)}export{ge as default};
